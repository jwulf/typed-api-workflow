# Camunda REST API Spec: Strong Typing and Path Param Flattening

## Purpose

This spec revision introduces **stronger semantic typing** for entity identifiers (e.g., `ProcessInstanceKey`, `JobKey`, etc.) by leveraging OpenAPI's `allOf` inheritance. These domain-specific types extend the base `CamundaKey` schema — a strongly-constrained `string` — to enable:

- ✅ Richer **type safety** in autogenerated SDKs (e.g., distinct types instead of plain strings)
- ✅ More expressive and **accurate documentation** (e.g., `string<ProcessInstanceKey>`)
- ✅ Clear contract boundaries for domain-specific values

## The Problem

Docusaurus incorrectly renders path parameters that use `$ref` to `allOf`-composed schemas (e.g., `ProcessInstanceKey`) as if they were **complex objects** — even though they resolve to constrained strings. This creates misleading documentation like:

```
processInstanceKey
object
required
```

when it should be: 

```
processInstanceKey
string<ProcessInstanceKey>
required
```

## Our Solution

To fix this, in the pre-processing hook in the existing API doc generation pipeline we apply a **custom transformation** before publishing the spec:

- Path parameters using `$ref` to `allOf` schemas are **flattened one level deep**
- The flattened schema inlines:
  - `type`, `pattern`, `example`, `minLength`, `maxLength`
  - A `format` of `string<DomainType>` to preserve semantic meaning in docs
  - The domain-specific `description`

This preserves SDK typing **unchanged** (since the original schema remains), while **improving rendered output** in documentation tools.

## File

The transformation is implemented in `flattenPathParams` in [`api/camunda/generation-strategy.js`](./api.camunda.generation-strategy.js) and is run as part of the doc generation pipeline.

## Application

This patch will need to be applied to `camunda-docs` to support the typed REST API.